<!-- AdSense Ad Component -->
{% macro render_adsense_ad(placement, page_location='all') %}
    {% set ads = get_adsense_ads(page_location, placement) %}
    {% if ads %}
        {% for ad in ads %}
            {% if ad.is_active %}
                <div class="adsense-ad adsense-{{ placement }}" 
                     data-ad-id="{{ ad.id }}" 
                     data-placement="{{ placement }}"
                     {% if ad.width and ad.height %}style="width: {{ ad.width }}px; height: {{ ad.height }}px;"{% endif %}>
                    
                    {% if ad.responsive %}
                        <!-- Responsive AdSense Ad -->
                        <div class="ad-responsive">
                            {{ ad.ad_code | safe }}
                        </div>
                    {% else %}
                        <!-- Fixed Size AdSense Ad -->
                        <div class="ad-fixed" style="width: {{ ad.width or 300 }}px; height: {{ ad.height or 250 }}px;">
                            {{ ad.ad_code | safe }}
                        </div>
                    {% endif %}
                    
                    <!-- Ad Label -->
                    <div class="ad-label text-xs text-gray-400 text-center mt-1">
                        إعلان
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}
{% endmacro %}

<!-- CSS for AdSense Ads -->
<style>
.adsense-ad {
    margin: 1rem 0;
    text-align: center;
}

.adsense-header {
    margin: 1rem auto 2rem;
    max-width: 728px;
}

.adsense-sidebar {
    margin: 1rem 0;
    max-width: 300px;
}

.adsense-content {
    margin: 2rem auto;
    max-width: 336px;
}

.adsense-footer {
    margin: 2rem auto 1rem;
    max-width: 728px;
}

.ad-responsive {
    display: block;
    width: 100%;
    height: auto;
}

.ad-fixed {
    margin: 0 auto;
}

.ad-label {
    opacity: 0.7;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Responsive breakpoints */
@media (max-width: 768px) {
    .adsense-header,
    .adsense-footer {
        max-width: 320px;
    }
    
    .adsense-sidebar {
        max-width: 100%;
        margin: 1rem auto;
    }
}
</style>